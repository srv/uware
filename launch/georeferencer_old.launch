<launch> 

	<param name="use_sim_time" value="true"/>

	<arg name="rate" default="1.0" />

	<rosparam command="load" file="$(find cola2_turbot)/config/georeferencer.yaml" />


	<!-- <arg name="bagfile" default="/DATA_B/bagfiles/xiroi/2022_01_31/xiroi_16_16_52/xiroi_images_2022-01-31-16-16-52_0.bag
								 /DATA_B/bagfiles/xiroi/2022_01_31/xiroi_16_16_52/xiroi_images_2022-01-31-16-22-26_1.bag
								 /DATA_B/bagfiles/xiroi/2022_01_31/xiroi_16_16_52/xiroi_images_2022-01-31-16-27-59_2.bag
								 /DATA_B/bagfiles/xiroi/2022_01_31/xiroi_16_16_52/xiroi_images_2022-01-31-16-33-33_3.bag
								 /DATA_B/bagfiles/xiroi/2022_01_31/xiroi_16_16_52/xiroi_images_2022-01-31-16-39-06_4.bag
								 /DATA_B/bagfiles/xiroi/2022_01_31/xiroi_16_16_52/xiroi_images_2022-01-31-16-44-39_5.bag"/> -->

	<arg name="bagfile" default="/DATA_C/bagfiles/InvHali/2020_09_17/15_46_41/images_2020-09-17-15-46-42_0.bag
								/DATA_C/bagfiles/InvHali/2020_09_17/15_46_41/images_2020-09-17-16-12-41_1.bag
								/DATA_C/bagfiles/InvHali/2020_09_17/15_46_41/images_2020-09-17-16-38-38_2.bag
								/DATA_C/bagfiles/InvHali/2020_09_17/15_46_41/images_2020-09-17-17-04-36_3.bag
								/DATA_C/bagfiles/InvHali/2020_09_17/15_46_41/images_2020-09-17-17-36-54_4.bag
								/DATA_C/bagfiles/InvHali/2020_09_17/15_46_41/topics_2020-09-17-15-46-43_0.bag"/>
	
	<!-- arg clock clock -r 0.8  -->
	<node pkg="rosbag" type="play" name="player" args="-d 1 -r $(arg rate) $(arg bagfile)" required="true" />

	<node name="Georef" pkg="cola2_turbot" type="img_georeferencer_no_tf.py" output="screen">
    	</node>

	<!-- Stereo Processing -->
    <include file="$(find cola2_turbot)/launch/payload/stereo/stereo_pipeline.launch">
        <arg name="stereo" value="stereo_down" />
    </include>


<!-- 
	 Publish Static Transforms in case of bagfiles with missing tfs
 	<node pkg="tf2_ros" type="static_transform_publisher" name="turbot_to_stereo_stick" args="0.4 0.0 0.8 0.0 0.0 0.0 /turbot/base_link /turbot/stereo_stick" />
    <node pkg="tf2_ros" type="static_transform_publisher" name="stereo_stick_to_stereo_base" args="0.0 0.0 0.0 1.57 0.0 1.57 /turbot/stereo_stick /turbot/stereo_down/base " />
    <node pkg="tf2_ros" type="static_transform_publisher" name="stereo_base_to_stereo" args="0.0 0.0 0.0 0.0 0.0 -1.57 /turbot/stereo_down/base /turbot/stereo_down " />
    <node pkg="tf2_ros" type="static_transform_publisher" name="stereo_to_left" args="-0.06 0.0 0.0 0.0 0.0 0.0 /turbot/stereo_down /turbot/stereo_down/left_optical " /> -->


</launch>
